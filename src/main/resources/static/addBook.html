<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Book List</title>
</head>
<body>

<h2>Add a Book</h2>
<form id="addBookForm">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title"><br><br>
    <label for="author">Author:</label>
    <input type="text" id="author" name="author"><br><br>
    <label for="isbn">ISBN:</label>
    <input type="text" id="isbn" name="isbn"><br><br>
    <label for="genre">Genre:</label>
    <input type="text" id="genre" name="genre"><br><br>
    <button type="submit" id="addBook">Add Book</button>
</form>

<script>
    const form = document.querySelector('#addBookForm');

       form.addEventListener('submit', (e) => {
           e.preventDefault(); // Prevent page refresh

           // Collect form data
           const title = document.getElementById('title').value;
           const author = document.getElementById('author').value;
           const isbn = document.getElementById('isbn').value;
           const genre = document.getElementById('genre').value;

           const newBook = { title, author, isbn, genre };

           // Send data to the server via POST request
           console.log('Intercepting request:', newBook);

           fetch('http://localhost:3000/books', {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json',
            },
               body: JSON.stringify(newBook), // Send the book data as JSON
           })
           .then(response => response.json())
           .then(data => {
               if (data.message) {
                   alert(data.message); // Show success message
               } else {
                   alert('Error: ' + data.error);
               }
           })
           .catch(err => {
               alert('An error occurred: ' + err.message);
           });
       });


</script>
<script src="../JavaScript/jsBooks.js"> </script>

</body>
</html>
